#! /bin/sh

# JAVA Options
JAVA_OPTS="-Djava.library.path=$LD_LIBRARY_PATH:/opt/mule/lib/boot -Dlog4j.configurationFile=$MULE_HOME/conf/log4j2.xml -cp lib/mule/*:lib/opt/*:lib/boot/*"

# Process Java addtional options from wrapper.conf
JAVA_ADDITIONAL_OPTS=`grep '^wrapper.java.additional.[0-9]\{1,2\}=' $MULE_HOME/conf/wrapper.conf | \
                        sed "s:\"%MULE_HOME%\":$MULE_HOME:" | sed "s:\"%MULE_BASE%\":$MULE_BASE:" | sed -e 's/^wrapper.java.additional.[0-9]\{1,2\}=//' | tr '\n' ' '`

# Mule options
MULE_OPTS=`cat $MULE_HOME/conf/mule-container.conf | tr '\n' ' '`

# Mule Container class
JAVA_MAIN=org.mule.runtime.module.launcher.MuleContainer

java $JAVA_OPTS $JAVA_ADDITIONAL_OPTS $MULE_OPTS $JAVA_MAIN 
